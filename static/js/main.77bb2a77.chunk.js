(this["webpackJsonpmy-cat-app"]=this["webpackJsonpmy-cat-app"]||[]).push([[0],{71:function(e,t,n){},72:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(17),s=n.n(r),i=(n(71),n(6)),u=(n(72),n(109)),o=n(108),l=n(65),d=n(112),j=n(113),b=n(103),p=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(a.useState)(e),n=Object(i.a)(t,2),c=n[0],r=n[1],s=Object(a.useCallback)((function(){return r((function(e){return!e}))}),[]);return[c,s,s]},f=n(8),h=n.n(f),O=n(12),x=n(102),m=n(110),v=n(111),g=n(104),y=n(28),C=n(29),k={CATAPI_BASE:"https://api.thecatapi.com/v1/",CATAPI_KEY:"468603ca-3623-444c-8d4b-a569132d620c",subID:"SalikRaf-101"},w=n(27),S=n.n(w);S.a.defaults.headers.common["x-api-key"]=k.CATAPI_KEY;var A=function(){function e(){Object(y.a)(this,e)}return Object(C.a)(e,null,[{key:"searchCats",value:function(){var e=Object(O.a)(h.a.mark((function e(){var t,n,a,c,r,s,i,u,o,l,d=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},n=t.limit,a=void 0===n?9:n,c=t.page,r=void 0===c?0:c,s=t.order,i=void 0===s?"asc":s,u=t.breedId,o=void 0===u?"":u,l="".concat(k.CATAPI_BASE,"images/search/?limit=").concat(a,"&page=").concat(r,"&order=").concat(i,"&breed_id=").concat(o),e.abrupt("return",S.a.get(l));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getSingleCat",value:function(){var e=Object(O.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(k.CATAPI_BASE,"images/search/"),e.abrupt("return",S.a.get(t));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"sendCatVote",value:function(){var e=Object(O.a)(h.a.mark((function e(t,n){var a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={image_id:t,value:n,sub_id:k.subID},c="".concat(k.CATAPI_BASE,"votes"),e.abrupt("return",S.a.post(c,a));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"uploadCatImage",value:function(){var e=Object(O.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),a="".concat(k.CATAPI_BASE,"images/upload"),e.abrupt("return",S.a.post(a,n,{headers:{"content-type":"multipart/form-data"}}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBreeds",value:function(){var e=Object(O.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(k.CATAPI_BASE,"breeds"),e.abrupt("return",S.a.get(t));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),I=A,T=n(1),E=function(){var e=Object(O.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I.uploadCatImage(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(e){var t=e.isOpen,n=e.onClose,c=Object(a.useState)(),r=Object(i.a)(c,2),s=r[0],u=r[1],o=Object(a.useState)(),l=Object(i.a)(o,2),d=l[0],j=l[1],p=Object(a.useState)(),f=Object(i.a)(p,2),h=f[0],O=f[1],y=Object(a.useState)(!1),C=Object(i.a)(y,2),k=C[0],w=C[1],S=Object(a.useRef)(),A=null;if(h&&d){A=Object(T.jsx)(x.a,{variant:function(){switch(d){case 201:return"success";case 400:return"info";case 500:return"danger";default:return"dark"}}(),dismissible:!0,onClose:function(){j(null),O(null)},children:h},"messageAlert")}return Object(T.jsxs)(m.a,{show:t,onHide:n,onShow:function(){S.current.value=null,j(null),O(null),w(!1)},backdrop:!k||"static",children:[Object(T.jsx)(m.a.Header,{closeButton:!k,children:Object(T.jsx)(m.a.Title,{children:"Upload Cat Image"})}),Object(T.jsxs)(m.a.Body,{children:[A,Object(T.jsx)(v.a,{children:Object(T.jsxs)(v.a.Group,{controlId:"catImageFile",children:[Object(T.jsx)(v.a.Label,{children:"Specific a cat image. It will be scanned and if a cat will be added."}),Object(T.jsx)(v.a.Control,{type:"file",ref:S,onChange:function(e){u(e.target.files[0])},disabled:k})]})})]}),Object(T.jsxs)(m.a.Footer,{children:[Object(T.jsx)(b.a,{variant:"secondary",onClick:n,disabled:k,children:"Cancel"}),Object(T.jsxs)(b.a,{variant:"primary",onClick:function(){if(0===!s)return j(1e3),void O("No file specified. Please select a file to upload.");j(null),O(null),w(!0),E(S.current.files[0]).then((function(e){201===e.status&&O("Successfull upload of a cat image!"),j(e.status)})).catch((function(e){j(e.response.status),400===e.response.status?O("Unsuccessfull. Image is either too large or isn't a cat!"):O("Server Error: ".concat(e.message))})).finally((function(){u(null),S.current.value="",w(!1)}))},disabled:!s,children:[k?Object(T.jsx)(g.a,{animation:"border",role:"uploading",className:"mr-2",size:"sm"}):null,"Upload"]})]})]})},N=n(105),P=n.p+"static/media/spinner.72e5fa5c.gif",_=function(e){var t=e.id,n=e.url,c=e.dimensions,r=e.onClick,s=Object(a.useState)(!0),u=Object(i.a)(s,2),o=u[0],l=u[1];Object(a.useEffect)((function(){l(!0)}),[n]);return Object(T.jsxs)("div",{className:"d-block mx-auto",style:{height:c.cy,width:c.cx},children:[Object(T.jsx)(N.a,{src:P,style:{display:o?"block":"none"},className:"mx-auto mt-auto mb-auto"}),Object(T.jsx)(N.a,{src:n,className:"mx-auto mt-auto mb-auto",style:{display:o?"none":"block",maxHeight:c.cy,maxWidth:c.cx,cursor:"pointer",border:"solid 1px #CDCDCD",boxShadow:"5px 5px 5px #1a1a1a"},onLoad:function(){l(!1)},onClick:r})]},t)},F=n(106),D=n(107),L=function(e){var t=e.id,n=e.onSuccess,c=Object(a.useState)(!1),r=Object(i.a)(c,2),s=r[0],u=r[1],o=function(){var e=Object(O.a)(h.a.mark((function e(a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),e.next=4,I.sendCatVote(t,a);case 4:n&&n(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("An error occured while voting. Try again");case 10:return e.prev=10,u(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)(b.a,{variant:"success",disabled:s,onClick:function(){return o(1)},children:["Vote Up\xa0",Object(T.jsx)(F.a,{})]}),"\xa0",Object(T.jsxs)(b.a,{disabled:s,variant:"danger",onClick:function(){return o(0)},children:[Object(T.jsx)(D.a,{}),"\xa0Vote Down"]})]})},U=function(){var e=Object(a.useState)({url:""}),t=Object(i.a)(e,2),n=t[0],c=t[1];function r(){I.getSingleCat().then((function(e){c(e.data[0])}))}function s(){r()}return Object(a.useEffect)((function(){r()}),[]),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(o.a,{children:Object(T.jsx)(l.a,{className:"align-self-center mt-2",children:Object(T.jsx)(_,{id:n.id,url:n.url,onClick:s,dimensions:{cx:"500px",cy:"500px"}})})}),Object(T.jsx)(o.a,{className:"mt-3",children:Object(T.jsx)(l.a,{children:Object(T.jsx)(L,{id:n.id,onSuccess:s})})}),Object(T.jsx)(o.a,{children:Object(T.jsx)("h2",{children:"Click on the image to select a random next image"})})]})},V=function(){var e=Object(O.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getBreeds();case 2:return t=e.sent,n=t.data.map((function(e){return{id:e.id,name:e.name}})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(O.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"rand",e.next=3,I.searchCats({breedId:t,order:"rand"});case 3:return n=e.sent,a=n.data.map((function(e){return{id:e.id,url:e.url}})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useRef)(),s=Object(a.useState)([]),u=Object(i.a)(s,2),l=u[0],d=u[1],j=Object(a.useState)(0),b=Object(i.a)(j,2),p=b[0],f=b[1],x=Object(a.useState)(!0),m=Object(i.a)(x,2),g=m[0],y=m[1];Object(a.useEffect)((function(){V().then((function(e){return c(e)})).then((function(){return C(r.current.value)}))}),[]);var C=function(){var e=Object(O.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(!0),K(r.current.value).then((function(e){f(e.length);for(var t=[],n=[],a=0;a<e.length;a++)a%3===0&&0!==a&&(t.push(n),n=[]),n.push(e[a]);n.length>0&&t.push(n),d(t),y(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=n.map((function(e){return Object(T.jsx)("option",{value:e.id,children:e.name},e.id)}));return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(o.a,{children:Object(T.jsx)(v.a,{children:Object(T.jsxs)(v.a.Group,{children:[Object(T.jsx)(v.a.Label,{children:"Breed"}),Object(T.jsxs)(v.a.Select,{ref:r,onChange:function(){C()},children:[Object(T.jsx)("option",{value:"",children:"All"}),k]}),Object(T.jsx)(v.a.Text,{children:"Change selection to see a specific breed"})]})})}),Object(T.jsxs)(o.a,{className:"justify-content-md-center",children:[Object(T.jsx)(N.a,{src:P,style:{display:g?"block":"none",height:"125px",width:"125px"}}),Object(T.jsx)("table",{className:"table",style:{width:"auto",display:g?"none":"block"},children:Object(T.jsx)("tbody",{children:l.map((function(e){return Object(T.jsx)("tr",{children:e.map((function(e){return Object(T.jsx)("td",{children:Object(T.jsx)(_,{id:e.id,url:e.url,dimensions:{cx:"150px",cy:"150px"}})},e.id)}))},e.reduce((function(e,t){return e.id+t.id}),""))}))})}),Object(T.jsx)("div",{children:Object(T.jsxs)("p",{children:["Total: ",p]})})]})]})};var R=function(){var e=p(!1),t=Object(i.a)(e,3),n=t[0],a=t[1],c=t[2];return Object(T.jsxs)(u.a,{className:"App text-center",children:[Object(T.jsx)(o.a,{children:Object(T.jsx)(l.a,{className:"align-self-center",children:Object(T.jsx)("h2",{children:"This is a work in progress."})})}),Object(T.jsx)(o.a,{children:Object(T.jsxs)(d.a,{mountOnEnter:!0,children:[Object(T.jsx)(j.a,{eventKey:"vote",title:"Vote",children:Object(T.jsx)(U,{})}),Object(T.jsx)(j.a,{eventKey:"search",title:"Search",children:Object(T.jsx)(H,{})})]})}),Object(T.jsxs)(o.a,{className:"justify-content-md-center",children:[Object(T.jsx)("hr",{}),Object(T.jsx)(l.a,{children:Object(T.jsx)(b.a,{onClick:a,children:"Upload a Image"})}),Object(T.jsx)(B,{isOpen:n,onClose:c})]})]})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,114)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(T.jsx)(c.a.StrictMode,{children:Object(T.jsx)(R,{})}),document.getElementById("root")),G()}},[[98,1,2]]]);
//# sourceMappingURL=main.77bb2a77.chunk.js.map